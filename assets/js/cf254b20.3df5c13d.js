"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[482],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=p(n),d=a,y=m["".concat(s,".").concat(d)]||m[d]||u[d]||o;return n?r.createElement(y,l(l({ref:t},c),{},{components:n})):r.createElement(y,l({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7588:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={},l="Dynamic Imports",i={unversionedId:"Modules/dynamic-imports",id:"Modules/dynamic-imports",title:"Dynamic Imports",description:"Export and import statements that we covered in previous chapters are called \u201cstatic\u201d. The syntax is very simple and strict.",source:"@site/docs/Modules/dynamic-imports.mdx",sourceDirName:"Modules",slug:"/Modules/dynamic-imports",permalink:"/anantblog/Modules/dynamic-imports",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Modules",permalink:"/anantblog/category/modules"},next:{title:"export-and-import",permalink:"/anantblog/Modules/export-and-import"}},s={},p=[],c={toc:p};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"dynamic-imports"},"Dynamic Imports"),(0,a.kt)("p",null,"Export and import statements that we covered in previous chapters are called \u201cstatic\u201d. The syntax is very simple and strict."),(0,a.kt)("p",null,"First, we can\u2019t dynamically generate any parameters of import."),(0,a.kt)("p",null,"The module path must be a primitive string, can\u2019t be a function call. This won\u2019t work:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import ... from getModuleName();\n")),(0,a.kt)("p",null,'// Error, only from "string" is allowed\nSecond, we can\u2019t import conditionally or at run-time:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"if(...) {\n  import ...; // Error, not allowed!\n}\n\n{\n  import ...; // Error, we can't put import in any block\n}\n")),(0,a.kt)("p",null,"That\u2019s because import/export aim to provide a backbone for the code structure. That\u2019s a good thing, as code structure can be analyzed, modules can be gathered and bundled into one file by special tools, unused exports can be removed (\u201ctree-shaken\u201d). That\u2019s possible only because the structure of imports/exports is simple and fixed."),(0,a.kt)("p",null,"But how can we import a module dynamically, on-demand?"),(0,a.kt)("p",null,"The import() expression\nThe import(module) expression loads the module and returns a promise that resolves into a module object that contains all its exports. It can be called from any place in the code."),(0,a.kt)("p",null,"We can use it dynamically in any place of the code, for instance:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'let modulePath = prompt("Which module to load?");\n\nimport(modulePath)\n  .then(obj => <module object>)\n  .catch(err => <loading error, e.g. if no such module>)\n\n')),(0,a.kt)("p",null,"Or, we could use let module = await import(modulePath) if inside an async function."),(0,a.kt)("p",null,"For instance, if we have the following module say.js:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \ud83d\udcc1 say.js\nexport function hi() {\n  alert(`Hello`);\n}\n\nexport function bye() {\n  alert(`Bye`);\n}\n")),(0,a.kt)("p",null,"Then dynamic import can be like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let {hi, bye} = await import('./say.js');\n\nhi();\nbye();\n")),(0,a.kt)("p",null,"Or, if say.js has the default export:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// \ud83d\udcc1 say.js\nexport default function() {\n  alert("Module loaded (export default)!");\n}\n')),(0,a.kt)("p",null,"Then, in order to access it, we can use default property of the module object:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let obj = await import('./say.js');\nlet say = obj.default;\n// or, in one line: let {default: say} = await import('./say.js');\n\nsay();\n")),(0,a.kt)("p",null,"Here\u2019s the full example:"),(0,a.kt)("p",null,"Resultsay.jsindex.html"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},"<!doctype html>\n<script>\n  async function load() {\n    let say = await import('./say.js');\n    say.hi(); // Hello!\n    say.bye(); // Bye!\n    say.default(); // Module loaded (export default)!\n  }\n<\/script>\n<button onclick=\"load()\">Click me</button>\n")),(0,a.kt)("p",null,'Please note:\nDynamic imports work in regular scripts, they don\u2019t require script type="module".'),(0,a.kt)("p",null,"Please note:\nAlthough import() looks like a function call, it\u2019s a special syntax that just happens to use parentheses (similar to super())."),(0,a.kt)("p",null,"So we can\u2019t copy import to a variable or use call/apply with it. It\u2019s not a function."))}u.isMDXComponent=!0}}]);